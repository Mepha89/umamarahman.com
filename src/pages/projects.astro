---
import DefaultLayout from '../components/LayoutDefault.astro';
import PortfolioItem from '../components/PortfolioItem.astro';
import { writeToLocalDataFile, readLocalDataFile } from '../js/localDataManager';

// Fetch stars count from GitHub
async function getRepoStars(repo: string) {
  try {
    const res = await fetch("https://api.github.com/repos/" + repo);
    const data = await res.json();

    const stars = data.stargazers_count;
    const existingCache = await readLocalDataFile("openSourceProjectStars");

    if (stars) {
      // Cache stars count
      await writeToLocalDataFile("openSourceProjectStars", { ...existingCache, [repo]: stars });

      return stars;
    } else {
      // If we get rate limited or GitHub request fails, return the value from cache
      const cacheFile = await readLocalDataFile(`openSourceProjectStars`);
      const valueFromCache = cacheFile[repo];

      return valueFromCache || undefined;
    }
  } catch(error) {
    console.log(error);
  }
}

const starsCount = {
  binanceBot: await getRepoStars("lukeliasi/binance-dca-bot"),
  lukeliasi: await getRepoStars("lukeliasi/lukeliasi.com"),
}
---

<DefaultLayout documentTitle="Projects" documentDescription="Welcome to my portfolio, showcasing a selection of projects I've worked on.">
  <div class="container">
    <h1 class="main-heading text-swipe-animation">Projects</h1>
    <div class="intro">
      <p>Welcome to my portfolio, showcasing a selection of side projects I've worked on.</p>
    </div>

    <section class="projects">
      <PortfolioItem
      isOpenSource
      sourceCode="https://github.com/Mepha89/umamarahman.com"
      githubStarsCount={starsCount.lukeliasi}
      projectYear="2023"
      title="My Portfolio umamarahman.com"
      image="/images/lukeliasi-portfolio.png"
      tags={[
        "JavaScript",
        "TypeScript",
        "Astro",
        "HTML",
        "CSS",
      ]}>
      <p slot="subtitle">My portfolio website, the site you are looking at right now!</p>

      <div slot="description">
        <p>Built with the Astro framework, this website is optimized for speed and search engines, designed with recruiters and tech enthusiasts in mind to efficiently access information about my skills, experience, and projects.</p>
        <p>The project emphasizes simplicity, utilizing reusable components and minimal third-party libraries to streamline development and reduce maintenance.</p>
        <p>Embracing transparency and collaboration, the website's codebase is fully open-source, allowing others to review my code and draw inspiration. The growing number of forks and stars on GitHub highlights the project's adaptability and the value it brings to the developer community.</p>
      </div>
    </PortfolioItem>

      <PortfolioItem
        isOpenSource
        sourceCode="https://github.com/lukeliasi/lukeliasi.com"
        githubStarsCount={starsCount.lukeliasi}
        projectYear="2023"
        title="My Portfolio lukeliasi.com"
        image="/images/lukeliasi-portfolio.png"
        tags={[
          "JavaScript",
          "TypeScript",
          "Astro",
          "HTML",
          "CSS",
        ]}>
        <p slot="subtitle">My portfolio website, the site you are looking at right now!</p>

        <div slot="description">
          <p>Built with the Astro framework, this website is optimized for speed and search engines, designed with recruiters and tech enthusiasts in mind to efficiently access information about my skills, experience, and projects.</p>
          <p>The project emphasizes simplicity, utilizing reusable components and minimal third-party libraries to streamline development and reduce maintenance.</p>
          <p>Embracing transparency and collaboration, the website's codebase is fully open-source, allowing others to review my code and draw inspiration. The growing number of forks and stars on GitHub highlights the project's adaptability and the value it brings to the developer community.</p>
        </div>
      </PortfolioItem>

      <PortfolioItem
        projectYear="2022"
        title="Quince Players"
        image="/images/quinceplayers-portfolio.png"
        projectLink="https://quinceplayers.com"
        tags={[
          "JavaScript",
          "TypeScript",
          "Node.js",
          "Directus",
          "PostgreSQL",
          "HTML",
          "CSS",
          "Tailwind CSS"
        ]}>
        <p slot="subtitle">Website for a theatrical society. Powered by Directus CMS for content management.</p>

        <div slot="description">
          <p>Built using Node.js, Express, and EJS. The content comes from the Directus API and pages are rendered server-side with dynamic content using EJS as the templating language and TailwindCSS on the client side.</p>
          <p>The website is optimised for speed and for search engines. Content editors can easily manage current, upcoming and past shows, blog posts and more on the website.</p>
        </div>
      </PortfolioItem>

      <PortfolioItem
      projectYear="2021"
        isOpenSource
        sourceCode="https://github.com/lukeliasi/binance-dca-bot"
        githubStarsCount={starsCount.binanceBot}
        title="Binance DCA Bot"
        image="/images/binance-dca-bot-portfolio.png"
        tags={[
          "JavaScript",
          "Node.js",
          "Docker",
          "MongoDB"
        ]}>
        <p slot="subtitle">Command-line trading bot using Node.js that connects to the Binance exchange and automatically executes trades via their API.</p>

        <div slot="description">
          <p>After being frustrated with the lack of tools to automate trades on the Binance platform, I developed this bot. It's open-source on GitHub with over 150 stars and includes a Docker image for easy deployment.</p>
          <p>The bot can be configured to trade specific currency pairs and includes options for external services such as email notifications through SendGrid and data storage using MongoDB as a storage adaptor.</p>
        </div>
      </PortfolioItem>

      <PortfolioItem
        projectYear="2020"
        title="WillenHouse Student Housing"
        image="/images/willenhouse-portfolio.png"
        projectLink="https://willenhouse.com"
        tags={[
          "JavaScript",
          "TypeScript",
          "React",
          "HTML",
          "CSS",
          "Node.js",
          "PostgreSQL",
          "AWS"
        ]}>
        <p slot="subtitle">Full-stack application that streamlines the process of booking housing for students.</p>

        <div slot="description">
          <p>The project included creating a bespoke CMS to manage payments, room details and more. The application is hosted on AWS cloud infrastructure and integrated with a secure payment gateway.</p>
          <p>The backend API, built using Node.js and Express, efficiently handles data while the frontend, created with React.js, presents it in an intuitive and user-friendly manner. The application simplifies the process for students to find and book available rooms, and for administrators to efficiently manage and update room information.</p>
        </div>
      </PortfolioItem>

      <PortfolioItem
        projectYear="2020"
        title="Bunny Shooter Game - (PyGame)"
        image="/images/bunny-shooter.png"
        sourceCode="https://github.com/Mepha89/Bunny-Shooter--Python-Game"
        tags={[
          "Python"
        ]}>
        <p slot="subtitle">Simple game called Bunnies and Badgers, where the hero, the bunny, has to defend a castle against an attacking horde of badgers.</p>

        <div slot="description">
          <p>The game is a Python application that uses the PyGame library to create a simple game where a bunny defends a castle from an attacking horde of badgers. </p>
          <p>The game includes features such as movement, shooting, and collision detection. It also includes a HUD that displays the bunny's health and the number of badgers remaining.</p>
        </div>
      </PortfolioItem>

      <PortfolioItem
        projectYear="2020"
        title="COVID-19 Screening Kit Project - (Python & Arduino)"
        image="/images/arduino-project.png"
        tags={[
          "Python"
        ]}>
        <p slot="subtitle">Intro to Python - Semester Project using Arduino Kit to make a COVID-19 Screening Test</p>

        <div slot="description">
          <p>Built using Python software and Arduino kit (button, LED screen, sensors) to create a system to screen for COVID-19 symptoms.</p>
          <p>The project uses the teachings of the course content to create a system that combines software and hardware to make a solution to screen for COVID-19 symptoms.</p>
        </div>
      </PortfolioItem>

      <PortfolioItem
        projectYear="2020"
        title="Java Programming MOOC"
        image="/images/Java-MOOC.png"
        sourceCode="https://github.com/Mepha89/Java-Programming-1-2019-MOOC"
        tags={[
          "Java"
        ]}>
        <p slot="subtitle">Learn the basics of computer programming, along with algorithms and object-oriented programming through the Java programming language.</p>

        <div slot="description">
          <p>This is the first course in University of Helsinki computer science learning track, and we use industry-grade tooling from day one. As such, the course is about programming in a real integrated development environment (IDE) instead of a browser or an educational IDE. </p>
          <p>The course is split up into two individual courses: Java Programming I and Java Programming II. Each course consists of seven parts, each with its own exercise set. Completing a single part takes approximately 5-20 hours.</p>
        </div>
      </PortfolioItem>
    </section>
  </div>
</DefaultLayout>

<style lang="scss">
  .projects {
    display: flex;
    flex-direction: column;
    margin-top: 3rem;
    row-gap: 2rem;
  }

  @media screen and (max-width: 980px) {
    .projects {
      margin-top: 1.5rem;
    }
  }
</style>